{
  "permissions": {
    "allow": [
      "Bash(gh auth status)",
      "Bash(git init)",
      "Bash(git add .)",
      "Bash(git add -A)",
      "Bash(git commit -m \"feat: Add trial group restriction - one admin only for trial groups\n\nNew business rule: Groups created during 20-day free trial can only have ONE admin.\n\nKey features:\n- Groups by trial users limited to single admin\n- Warning banner shown to ALL group members with countdown\n- Banner text: [Admin Name] needs to subscribe in X days or group deleted\n- Color-coded urgency: Yellow (20-6 days), Orange (5-2), Red (1 day)\n- Remind Admin button sends notification\n\nPost-trial:\n- Admin subscribes: Remove banner, allow multiple admins\n- Trial expires: Archive group (read-only), preserve data, reactivate by subscribing\n\nDatabase changes:\n- Added created_by_trial_user BOOLEAN to groups table\n- Added created_by_user_id UUID to track creator\n- Added constraint for trial flag validation\n\nDocumentation updates:\n- appplan.md: Trial restrictions section with banner specs\n- aiMessageToDev.md: Q18 expanded with restrictions\n- Initial.md: Added gotcha #23\n- DECISIONS_SUMMARY.md: Trial restrictions section\n- database/schema.sql: Updated groups table\n\nRationale: Encourages conversion, prevents abuse, creates urgency\n\nðŸ¤– Generated with Claude Code\n\nCo-Authored-By: Claude <noreply@anthropic.com>\")",
      "Bash(git push)",
      "Bash(gh label create \"web-app\" --color \"0E8A16\" --description \"Admin web app features\")",
      "Bash(gh label create \"mobile-main\" --color \"1D76DB\" --description \"Parenting Helper mobile app\")",
      "Bash(gh label create \"mobile-messenger\" --color \"5319E7\" --description \"PH Messenger app\")",
      "Bash(gh issue create --title \"[TASK] Create database schema with Prisma\" --label \"backend,infrastructure,high-priority\" --body \"$(cat <<''EOF''\n## Description\nConvert existing SQL schema to Prisma schema and set up database migrations.\n\n## Tasks\n- [ ] Install Prisma CLI and client\n- [ ] Convert database/schema.sql to Prisma schema format\n- [ ] Verify all 23 tables are defined correctly\n- [ ] Verify trial restriction fields on groups table\n- [ ] Create initial Prisma migration\n- [ ] Run migration on local PostgreSQL\n- [ ] Run migration on dev RDS instance\n- [ ] Test database connections from Lambda\n- [ ] Create seed data for testing\n- [ ] Document Prisma setup and usage\n\n## Phase\nPhase 1 (Foundation) - Week 2\n\n## Dependencies\n- Local database running (Docker)\n- Dev RDS instance created (Terraform)\n\n## Resources\n- database/schema.sql - Complete schema with 23 tables\n- Focus on trial restriction fields: created_by_trial_user, created_by_user_id\nEOF\n)\")",
      "Bash(gh issue create --title \"[TASK] Create local Express.js API server\" --label \"backend,high-priority\" --body \"$(cat <<''EOF''\n## Description\nCreate local Express.js server for API development. This allows us to develop and test all backend functionality locally before deploying to AWS Lambda.\n\n## Tasks\n- [ ] Create Express.js server structure\n- [ ] Set up routing middleware\n- [ ] Create controller pattern (reusable for Lambda later)\n- [ ] Add error handling middleware\n- [ ] Set up CORS for local web/mobile apps\n- [ ] Add request validation with Joi\n- [ ] Create health check endpoint\n- [ ] Set up hot reload for development\n- [ ] Document API endpoints\n- [ ] Test with Postman/Thunder Client\n\n## Phase\nPhase 1 (Foundation) - Week 1\n\n## Dependencies\n- Node.js v20 installed\n- Local database running\n\n## Architecture Note\nFunctions will be written in a Lambda-compatible format, then wrapped with Express routes locally. When deploying to AWS (Phase 6), we''ll use the same functions with Lambda wrappers.\n\n## Resources\n- Express.js documentation\n- Joi validation library\n- Pattern: Controller â†’ Service â†’ Repository layers\nEOF\n)\")",
      "Bash(gh issue create --title \"[TASK] Create local Express.js API server\" --label \"backend,high-priority\" --body \"## Description\nCreate local Express.js server for API development. This allows us to develop and test all backend functionality locally before deploying to AWS Lambda.\n\n## Tasks\n- [ ] Create Express.js server structure\n- [ ] Set up routing middleware\n- [ ] Create controller pattern (reusable for Lambda later)\n- [ ] Add error handling middleware\n- [ ] Set up CORS for local web/mobile apps\n- [ ] Add request validation with Joi\n- [ ] Create health check endpoint\n- [ ] Set up hot reload for development\n- [ ] Document API endpoints\n- [ ] Test with Postman/Thunder Client\n\n## Phase\nPhase 1 (Foundation) - Week 1\n\n## Dependencies\n- Node.js v20 installed\n- Local database running\n\n## Architecture Note\nFunctions will be written in a Lambda-compatible format, then wrapped with Express routes locally. When deploying to AWS (Phase 6), we use the same functions with Lambda wrappers.\n\n## Resources\n- Express.js documentation\n- Joi validation library\n- Pattern: Controller â†’ Service â†’ Repository layers\")",
      "Bash(gh issue create --title \"[TASK] Set up local file storage and email mocking\" --label \"backend,infrastructure\" --body \"## Description\nSet up local alternatives for AWS services (S3 and SES) to enable full local development without AWS costs.\n\n## Tasks\n- [ ] Create local file storage abstraction layer\n- [ ] Set up uploads folder for local file storage\n- [ ] Create file upload/download endpoints\n- [ ] Add file size tracking for storage limits\n- [ ] Set up MailHog Docker container for email preview\n- [ ] Create email service abstraction layer\n- [ ] Test file uploads locally\n- [ ] Test email sending locally\n- [ ] Document storage and email configuration\n\n## Phase\nPhase 1 (Foundation) - Week 2\n\n## Dependencies\n- Express.js server running\n- Docker installed\n\n## Architecture Note\nUse abstraction layers so switching to S3/SES in Phase 6 requires minimal code changes.\n\n## Resources\n- MailHog: Local email testing tool\n- Multer: File upload middleware for Express\n- Pattern: Storage interface with local/S3 implementations\")",
      "Bash(grep:*)",
      "Bash(ls:*)",
      "Bash(source:*)",
      "Bash(find:*)",
      "Bash(mv:*)",
      "Bash(mkdir:*)",
      "Bash(tree:*)",
      "Bash(ruff:*)",
      "Bash(touch:*)",
      "Bash(cat:*)",
      "Bash(ruff check:*)",
      "Bash(pytest:*)",
      "Bash(python:*)",
      "Bash(python -m pytest:*)",
      "Bash(python3 -m pytest:*)",
      "WebFetch(domain:docs.anthropic.com)",
      "WebFetch(domain:github.com)",
      "Bash(curl:*)",
      "Bash(npm run dev:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(npm install:*)",
      "Read(//tmp/**)",
      "Bash(npm test:*)",
      "Bash(npx prisma migrate:*)",
      "Bash(git log:*)",
      "Bash(npx prisma format:*)",
      "Bash(PRISMA_USER_CONSENT_FOR_DANGEROUS_AI_ACTION=\"Yes\" npx prisma migrate reset:*)",
      "WebFetch(domain:)",
      "Bash(terraform apply:*)",
      "Bash(aws s3 cp:*)",
      "Bash(./scripts/build-lambda.sh:*)",
      "Bash(npm uninstall:*)",
      "Bash(unzip:*)",
      "Bash(aws logs tail:*)",
      "Bash(npm ls:*)",
      "Bash(aws lambda update-function-code:*)",
      "Bash(https://i5i7f82usg.execute-api.ap-southeast-2.amazonaws.com/prod/health/migrate)",
      "Bash(aws ec2 describe-key-pairs:*)",
      "Bash(DATABASE_URL=\"postgresql://familyhelper_admin:Zh3Z4VK5X2mP9xMJTDOW27xjh1cZ6Pk@localhost:5433/familyhelper\" npx prisma migrate:*)",
      "Bash(aws ec2 authorize-security-group-ingress:*)",
      "Bash(ssh -i ~/.ssh/family-helper-bastion.pem -o StrictHostKeyChecking=no ec2-user@54.79.179.77 \"timeout 5 bash -c ''</dev/tcp/family-helper-db-prod.c3uu4gkmcwnq.ap-southeast-2.rds.amazonaws.com/5432'' && echo ''Connection successful'' || echo ''Connection failed''\")",
      "Bash(pkill:*)",
      "Bash(ssh:*)",
      "Bash(aws cloudfront create-invalidation:*)",
      "Bash(PGPASSWORD=\"Zh3Z4VK5X2mP9xMJTDOW27xjh1cZ6Pk\" psql:*)",
      "Bash(DATABASE_URL=\"postgresql://familyhelper_admin:Zh3Z4VK5X2mP9xMJTDOW27xjh1cZ6Pk@localhost:5433/familyhelper\" npx prisma migrate deploy:*)",
      "Bash(node -e:*)",
      "Bash(aws ec2 describe-instances:*)",
      "Bash(terraform init:*)",
      "Bash(aws lambda get-function:*)",
      "Bash(aws apigatewayv2 get-apis:*)",
      "Bash(aws cloudfront list-distributions:*)",
      "Bash(aws s3:*)",
      "Bash(aws sts get-caller-identity:*)",
      "Bash(sudo ./aws/install:*)",
      "Bash(sudo apt-get:*)",
      "Bash(python3 -m pip install:*)",
      "Bash(npm --version:*)",
      "Bash(chmod:*)",
      "Bash(./aws/install:*)",
      "Bash(~/.local/bin/aws --version)",
      "Bash(~/.local/bin/aws sts:*)",
      "Bash(~/.local/bin/aws lambda get-function:*)",
      "Bash(export NVM_DIR=\"$HOME/.nvm\")",
      "Bash([ -s \"$NVM_DIR/nvm.sh\" ])",
      "Bash(. \"$NVM_DIR/nvm.sh\")",
      "Bash(python3:*)",
      "Bash(git check-ignore:*)",
      "Bash(npx jest:*)",
      "Bash(docker-compose build:*)",
      "Bash(docker-compose up:*)",
      "Bash(docker-compose ps:*)",
      "Bash(git push:*)",
      "Bash(git config:*)",
      "Bash(docker-compose down:*)",
      "Bash(docker exec:*)",
      "Bash(/home/andrew/.nvm/versions/node/v20.19.0/bin/npx prisma migrate dev --name add_support_user_fields)",
      "Bash(npx expo export:*)",
      "Bash(~/.local/bin/aws lambda update-function-code:*)",
      "Bash(~/.local/bin/aws lambda get-function-configuration:*)"
    ],
    "deny": [],
    "ask": []
  }
}
